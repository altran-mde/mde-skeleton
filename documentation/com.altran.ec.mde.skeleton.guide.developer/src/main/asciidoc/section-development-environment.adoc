include::_attributes.adoc[]

ifndef::oomph-setup-file-path[:oomph-setup-file-path: releng/eclipse/MDESkeletonACIDSpace.setup]

[[setup-development-environment]]
== How to setup a development environment

To start developing for {project-name}, please perform the following steps:

. Start with downloading the `Eclipse Installer` from: +
  https://www.eclipse.org/downloads/packages/installer
. Start the `Eclipse Installer`
. Select the `advanced mode` +
+
image::http://help.eclipse.org/{eclipse-version}/topic/org.eclipse.egit.doc/help/EGit/Contributor_Guide/images/Oomph-01-advanced-mode.png[]
. On the https://help.eclipse.org/{eclipse-version}/topic/org.eclipse.oomph.setup.doc/html/user/wizard/DocProductPage.html[Product Page] 
.. Select `Eclipse Platform`
.. Product Version: `{eclipse-version}`
.. Click btn:[Next >]
. On the https://help.eclipse.org/{eclipse-version}/topic/org.eclipse.oomph.setup.doc/html/user/wizard/DocProjectPage.html[Projects Page]
.. (_One time only_) Click the image:http://help.eclipse.org/{eclipse-version}/topic/org.eclipse.oomph.setup.doc/images/trees/DULKrP4IGs7HGSVqoXcwRFgPxZQ=.png[] icon to add the {project-name} project.
... Catalog: `Eclipse Projects`
... Resource URIs: `link:https://gitlab.acidspace.nl/{gitproject}/-/raw/{gitbranch}/{oomph-setup-file-path}?oomph_form=b%27users/sign_in%27#/[]`
... Click btn:[OK] +
+
NOTE: Though using the Resource URI above is preferred, it is known that for some users the URI didn't work and they got an error: _The URI ... does not contain a valid product_.
In this case the setup file can also be link:https://gitlab.acidspace.nl/{gitproject}/-/raw/{gitbranch}/{oomph-setup-file-path}?inline=false[downloaded] and added by clicking btn:[Browse File System...].
... Enter your GitLab credentials when asked for
.. Select `{project-name}` in the tree
.. Select stream `{gitbranch}` in the table
.. Click btn:[Next >]
. On the https://help.eclipse.org/{eclipse-version}/topic/org.eclipse.oomph.setup.doc/html/user/wizard/DocVariablePage.html[Variables Page]
.. Review all variables values, especially the `Installation folder name` and `Root install folder`
.. Click btn:[Next >]
. On the https://help.eclipse.org/{eclipse-version}/topic/org.eclipse.oomph.setup.doc/html/user/wizard/DocConfirmationPage.html[Confirmation Page]
.. Click btn:[Finish]

Your development environment will now be prepared.
Please accept all licenses and certificates and provide your GitLab credentials when asked for.

[[setup-maven]]
=== Build code with Maven

Please perform the steps in this section if you want to build your code using Maven on your local system.
The code can built using Maven from either the command line or from within Eclipse, please read the "**Use**" items of https://maven.apache.org/index.html[the Maven documentation^] before running Maven the first time.

In ACIDSpace's CI/CD the credentials of a project are stored in the `TECHNICAL_USER` and `TECHNICAL_PASSWORD` environment variables.
In order to be able to use the Maven `settings.xml` both in CI/CD and on your local system, you should also set these environment variables on your local system.

CAUTION: It is strongly advised to store an encrypted password in the `TECHNICAL_PASSWORD` environment variable for security reasons.
Maven supports server password encryption, see https://maven.apache.org/guides/mini/guide-encryption.html[].

The `releng/eclipse` directory contains pre-configured Eclipse launch targets to build your code using Maven from within Eclipse.

The root Maven `pom.xml` for the {project-name} project is located in the root of the local git repository.
Just open a command line at that location and type the following command to build the code:

[source,shell]
----
$ mvn clean verify -s settings.xml
----

[[setup-checkout-branch]]
=== Checkout another branch

Typically you will develop your feature in a feature branch.
To start working on a feature, start by creating an issue in GitLab.
From the issue, a feature branch can be created using the GitLab web UI.
Make sure to prefix you branch name with `feature/`.

When the feature branch is created, you can continue with fetching the new branch in your Eclipse development environment, see link:{eclipse-help-location}/org.eclipse.egit.doc/help/EGit/User_Guide/Tasks.html#Fetching_from_upstream[Fetching from upstream].
Then continue by switching to the new branch, see link:{eclipse-help-location}/org.eclipse.egit.doc/help/EGit/User_Guide/Tasks.html#Checking_out_an_existing_Branch[Checking out an existing Branch].
