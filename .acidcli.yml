# Copyright Altran Netherlands B.V

project: mde-skeleton
language: Java
default_branch: "develop"
code_location:
  source:
    - ./features/
    - ./products/
    - ./plugins/
    - ./releng/
  test:
    - ./tests/
artifact_repository_url: "https://nexus.acidspace.nl/repository/{}/{}{}"

build:
  binaries:
    platform: Maven
    precondition:
      - OutputDirectoryExists
      - OutputDirectoryIsEmpty
    postcondition:
      - OutputDirectoryIsNotEmpty
    parameters:
      output: ./reports/build/binaries
      build_settings_path: ./settings.xml
      build_pom_path: ./pom.xml

test:
  units:
    platform: Maven
    precondition:
      - OutputDirectoryExists
      - OutputDirectoryIsEmpty
    postcondition:
      - OutputDirectoryIsNotEmpty
    parameters:
      output: ./reports/test/units
      test_settings_path: ./settings.xml
      test_pom_path: ./pom.xml
      index: test-units
    gate:
      - metric: NumberOfTests
        threshold: 46
        operator: "="

release:
  binaries:
    platform: P2
    precondition:
      - OutputDirectoryExists
      - OutputDirectoryIsEmpty
    postcondition:
      - OutputDirectoryIsNotEmpty
    parameters:
      repository: MDEAssets
      repository_path: mde-skeleton
      repository_project: ./products/com.altran.ec.mde.skeleton.package.product
      output: ./reports/release/binaries
